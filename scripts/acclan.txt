#!/bin/bash

echo "[Gloria Aos Pombos]" & sleep 1

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | BEM VINDO AO ACCLAN   |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   | VERSAO :13.09.23      ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

sleep 1

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | INSTALAR              |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   | 1 CHROOT              ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   | 2 PROOT               ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

read opcao

if [ $opcao 1 ] || [ $opcao 2 ]

then

	&>/dev/null
else

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | OPCAO INVALIDA        |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

fi

clear

termux-setup-storage & sleep 4 &>/dev/null

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | ACESSO STORAGE        |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

sleep 1
clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | ATUALIZANDO TERMUX    |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

apt-get clean
apt-get update >/dev/null 2>&1
apt-get -y --with-new-pkgs -o Dpkg::Options::="--force-confdef" upgrade >/dev/null 2>&1

sleep 1
clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | INSTALANDO PACOTES    |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

if [ $opcao = 1 ]
then

       pkg install x11-repo -y &>/dev/null
       pkg install pulseaudio -y &>/dev/null
       pkg install xwayland -y &>/dev/null
       pkg install wget -y &>/dev/null
       pkg install tsu -y &>/dev/null

elif [ $opcao = 2 ]
then

       pkg install x11-repo -y &>/dev/null
       pkg install pulseaudio -y &>/dev/null
       pkg install xwayland -y &>/dev/null
       pkg install proot -y &>/dev/null
       pkg install wget -y &>/dev/null

fi

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | INSTALANDO DEBS X11   |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

wget https://github.com/olegos2/termux-box/raw/main/components/termux-x11-1.02.07-0-all.deb &>/dev/null
dpkg -i termux-x11-1.02.07-0-all.deb &>/dev/null
rm -rf termux-x11-1.02.07-0-all.deb

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | BAIXANDO ROOTFS       |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

if [ $opcao = 1 ]
then
        wget -q --show-progress https://cdimage.ubuntu.com/ubuntu-base/releases/jammy/release/ubuntu-base-22.04-base-arm64.tar.gz

elif [ $opcao = 2 ]
then
        mkdir -p /data/data/com.termux/files/usr/var/lib/proot-distro/ &>/dev/null
	mkdir -p /data/data/com.termux/files/usr/var/lib/proot-distro/installed-rootfs/ &>/dev/null
	mkdir -p /data/data/com.termux/files/usr/var/lib/proot-distro/installed-rootfs/ubuntu &>/dev/null
	wget -q wget -q --show-progress https://cdimage.ubuntu.com/ubuntu-base/releases/jammy/release/ubuntu-base-22.04-base-arm64.tar.gz
fi

#instalando rootfs

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | INSTALADO ROOTFS      |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

if [ $opcao = 1 ]
then
       sudo mkdir ~/ACCLAN
       sudo tar  -xzvf ubuntu-base-22.04-base-arm64.tar.gz -C ~/ACCLAN &>/dev/null
elif [ $opcao = 2 ]
then
       proot-distro restore ubuntu-base-22.04-base-arm64.tar.gz &>/dev/null
fi

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | FINALIZANDO           |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="

curl -O https://github.com/OpomboMORTO/fex-acclan/raw/main/scripts/Acclan &>/dev/null
chmod +x Acclan
mv Acclan $PREFIX/bin &>/dev/null

#rm -rf acclan &>/dev/null

if [ $opcao = 1 ]
then

rm ubuntu-base-22.04-base-arm64.tar.gz &>/dev/null

elif [ $opcao = 2 ]
then

rm ubuntu-base-22.04-base-arm64.tar.gz &>/dev/null

fi

clear

echo "______________________________________________"
echo "|  ™POMBO                                    |\ "
echo "|   _____________________________________    | \ "
echo "|   |   _______________|________   |  - ×|   |  \ "
echo "|   |   |•___________________- ×|  |     |   |   \ "
echo "|   |   |                       |  |     |   |    |"
echo "|   |   | INSTALADO             |  |     |   |    |"
echo "|   |   |                       |__|     |   |\   |"
echo "|   |   |                       ||       |   | \  |"
echo "|   |   |                       ||       |   |  \ |"
echo "|   |   |                       ||       |   |   \|"
echo "|   |   |_______________________||       |   |    |"
echo "|   |     '----------------------'       |   |    |"
echo "|   |                    0 -  DESLIGAR   |   |    |"
echo "|   |____________________________________|   |    |"
echo "|   |____________________________°_°_°___|   |    |"
echo "|                                            |    |"
echo "=================================================="


